import{a as x,a7 as b,r as h,t as p,j as e}from"./index-Bq32TEZ8.js";import{A as f}from"./index-rtsjbbxS.js";import{U as g}from"./UserLayout-yuTYACIF.js";import{U as y}from"./UserHeader-qhcX_yJu.js";import"./iconBase-Cst9Bakk.js";import"./IconHeader-BhAI_0tO.js";import"./assets-Dbh41_OJ.js";import"./index-B6qKfaA3.js";import"./index-BB54KNlg.js";import"./index-DsaIwXDl.js";function C(){const o=x(),m=b(),i=new URLSearchParams(m.search),c=i.get("payment_intent"),r=i.get("type"),a=i.get("id"),n=i.get("amount"),d=new Date().toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});let t={title:"Payment Successful!",description:`Your transaction of ₹${n||"0.00"} has been completed successfully.`,actionText:"Back to Artist",actionPath:r==="artist"?`/artist/${a}`:"/"};switch(r){case"artist":t.title="Subscription Activated!",t.description=`Your monthly subscription for ₹${n} has been activated successfully.`,t.actionText="Go to Artist Page";break;case"song":t.title="Song Purchased!",t.description=`You've successfully purchased this song for ₹${n}.`,t.actionText="View Your Library",t.actionPath="/library";break;case"album":t.title="Album Purchased!",t.description=`You've successfully purchased this album for ₹${n}.`,t.actionText="View Your Library",t.actionPath="/library";break}h.useEffect(()=>{if(p.success(t.title,{description:t.description}),r==="artist"&&a&&typeof window<"u"){let s=[];try{s=JSON.parse(localStorage.getItem("subscribedArtists"))||[]}catch(l){console.error("Error parsing subscribed artists:",l),s=[]}if(!s.includes(a))try{localStorage.setItem("subscribedArtists",JSON.stringify([...s,a]))}catch(l){console.error("Error saving to localStorage:",l)}}},[r,a,t]);const u=s=>s?s.length>16?`${s.substring(0,8)}...${s.substring(s.length-8)}`:s:"TXN"+Math.random().toString(36).substring(2,10).toUpperCase();return e.jsxs(g,{children:[e.jsx(y,{}),e.jsx("section",{className:"bg-gradient-to-br from-black to-blue-950 min-h-screen w-full flex flex-col items-center text-white py-8 px-4",children:e.jsx("div",{className:"w-full max-w-md lg:max-w-lg",children:e.jsxs("div",{className:"w-full flex flex-col items-center bg-gray-900 rounded-xl shadow-lg shadow-blue-900/30 p-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-green-900/20 mb-6",children:e.jsx(f,{className:"h-12 w-12 text-green-500"})}),e.jsx("h1",{className:"text-2xl md:text-3xl mb-2 text-center font-bold",children:t.title.includes("Payment")?e.jsxs(e.Fragment,{children:[t.title.split(" ")[0]," ",e.jsx("span",{className:"text-blue-500",children:t.title.split(" ")[1]})]}):t.title}),e.jsx("p",{className:"text-gray-400 mb-6 text-center text-sm md:text-base",children:t.description}),e.jsxs("div",{className:"w-full bg-gray-800 rounded-lg p-4 md:p-5 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-3 pb-2 border-b border-gray-700 gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Transaction ID"}),e.jsx("span",{className:"font-medium text-sm md:text-base truncate",title:c,children:u(c)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-3 pb-2 border-b border-gray-700 gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Date & Time"}),e.jsx("span",{className:"font-medium text-sm md:text-base",children:d})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Payment Method"}),e.jsx("span",{className:"font-medium text-sm md:text-base",children:"Credit Card (via Stripe)"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-3 w-full",children:[e.jsx("button",{onClick:()=>o(t.actionPath),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 md:py-3 px-4 rounded-lg transition-all duration-300 shadow-md hover:shadow-blue-500/20",children:t.actionText}),e.jsx("button",{onClick:()=>o("/"),className:"w-full border border-gray-600 hover:bg-gray-800 text-white font-medium py-2 md:py-3 px-4 rounded-lg transition-all duration-300",children:"Back to Home"})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-6 text-center",children:r==="artist"?"Your subscription will automatically renew each month. You can cancel anytime.":"A receipt has been sent to your registered email address."})]})})})]})}export{C as default};
