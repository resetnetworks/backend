import{e as _,u as D,b as c,r as n,M as T,i as L,j as e,o as M,p as $}from"./index-Bq32TEZ8.js";import{U as E}from"./UserLayout-yuTYACIF.js";import{U}from"./UserHeader-qhcX_yJu.js";import{S as B}from"./SongList-CIZ81_nY.js";import{O}from"./OneTimePaymentModal-Trly3YgJ.js";import{c as H,d as R}from"./albumsSelector-BPwziAEI.js";import{b as q}from"./artistsSelectors-BMpZxlMU.js";import{f as z}from"./index-DsaIwXDl.js";import{S as F,a}from"./index-rtsjbbxS.js";/* empty css                 */import"./IconHeader-BhAI_0tO.js";import"./assets-Dbh41_OJ.js";import"./iconBase-Cst9Bakk.js";import"./index-B6qKfaA3.js";import"./index-BB54KNlg.js";import"./index-BLpoeeon.js";function G(o){return new Date(o).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function ne(){var N,y;const{albumId:o}=_(),l=D(),s=c(H),g=c(R),d=c(t=>t.player.selectedSong),r=c(t=>t.auth.user),h=c(q),[v,u]=n.useState(!1),[m,f]=n.useState(null),[A,j]=n.useState(null);n.useEffect(()=>{o&&l(T(o)),l(L())},[o,l]);const S=t=>{l(M(t)),l($())},b=(t,i)=>{f(t),j(i),u(!0)},w=typeof(s==null?void 0:s.artist)=="object"?s.artist.name:((N=h.find(t=>t._id===(s==null?void 0:s.artist)))==null?void 0:N.name)||"Unknown Artist",x=(s==null?void 0:s.songs)||[],p=(y=r==null?void 0:r.purchasedAlbums)==null?void 0:y.includes(s==null?void 0:s._id),P=(t=>{if(!t)return"bg-blue-600";const i=["bg-blue-600","bg-purple-600","bg-pink-600","bg-red-600","bg-orange-600","bg-yellow-600","bg-green-600","bg-teal-600","bg-indigo-600"],C=t.split("").reduce((I,k)=>k.charCodeAt(0)+I,0);return i[C%i.length]})(w);return e.jsxs(E,{children:[e.jsx(U,{}),e.jsx(F,{baseColor:"#1f2937",highlightColor:"#374151",children:e.jsxs("div",{className:"min-h-screen text-white px-8 pt-10 pb-8",children:[g||!s||h.length===0?e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-8 pb-6",children:[e.jsx(a,{width:232,height:232,className:"rounded-lg"}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx(a,{width:80,height:18}),e.jsx(a,{width:300,height:36}),e.jsx(a,{width:400,height:16}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(a,{width:100,height:14}),e.jsx(a,{width:12,height:14}),e.jsx(a,{width:120,height:14}),e.jsx(a,{width:12,height:14}),e.jsx(a,{width:80,height:14})]})]})]}):e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-8 pb-6",children:[s.coverImage?e.jsx("img",{src:s.coverImage,alt:"Album Cover",className:"w-[232px] h-[232px] object-cover rounded-lg shadow-lg"}):e.jsx("div",{className:`w-[232px] h-[232px] ${P} rounded-lg shadow-lg flex items-center justify-center text-white font-bold text-4xl`,children:s.title?s.title.charAt(0).toUpperCase():"A"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold tracking-widest uppercase opacity-80",children:"Album"}),e.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold my-2",children:s.title}),e.jsx("p",{className:"text-lg text-gray-400",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap text-sm md:text-base text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:w}),e.jsx("span",{className:"text-xl",children:"•"}),e.jsx("span",{children:G(s.releaseDate)}),e.jsx("span",{className:"text-xl",children:"•"}),e.jsxs("span",{children:[x.length," songs"]})]}),s.price>0&&e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsxs("span",{className:"text-lg font-semibold text-blue-400",children:["$",s.price]}),p?e.jsx("span",{className:"px-6 py-3 bg-green-600 text-white rounded-full font-semibold",children:"Purchased"}):e.jsx("button",{onClick:()=>b(s,"album"),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-full font-semibold transition-all duration-200 shadow-md",children:"Purchase Album"})]})]})]}),g||!s||h.length===0?e.jsx("div",{className:"flex flex-col gap-4",children:[...Array(5)].map((t,i)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{width:50,height:50,className:"rounded-full"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(a,{width:160,height:14}),e.jsx(a,{width:100,height:12})]})]},`song-skeleton-${i}`))}):x.length===0?e.jsx("div",{className:"text-center text-gray-400 mt-8 text-lg",children:"No songs in this album."}):x.map(t=>{var i;return e.jsx("div",{className:"mb-4",children:e.jsx(B,{songId:t._id,img:t.coverImage||s.coverImage,songName:t.title,singerName:t.singer,seekTime:z(t.duration),onPlay:()=>S(t),isSelected:(d==null?void 0:d._id)===t._id,price:t.accessType==="purchase-only"&&!p?(i=r==null?void 0:r.purchasedSongs)!=null&&i.includes(t._id)?"Purchased":e.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white text-xs px-2 py-1 rounded",onClick:()=>b(t,"song"),children:["Buy for $",t.price]}):p?"Included":"Subs.."})},t._id)}),v&&m&&e.jsx(O,{itemType:A,itemId:m._id,amount:m.price,onClose:()=>{u(!1),f(null),j(null)}})]})})]})}export{ne as default};
