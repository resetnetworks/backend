import{u as D,r as c,b as o,S as C,j as e}from"./index-Bq32TEZ8.js";import{F,f as A,g as T,h as I,c as L,d as _}from"./index-BB54KNlg.js";import{U as E}from"./UserHeader-qhcX_yJu.js";import"./iconBase-Cst9Bakk.js";import"./index-DsaIwXDl.js";const P=l=>{var t,d;return((d=(t=l.userDashboard)==null?void 0:t.purchases)==null?void 0:d.history)||[]},U=l=>{var t;return(t=l.userDashboard)==null?void 0:t.loading},H=l=>{var t;return(t=l.userDashboard)==null?void 0:t.error},B=()=>{const l=D(),[t,d]=c.useState(null),[p,f]=c.useState(""),[i,N]=c.useState("all"),x=o(s=>s.songs.allSongs),m=o(s=>s.albums.allAlbums),g=o(P),j=o(U),u=o(H);c.useEffect(()=>{l(C())},[l]);const y=s=>d(t===s?null:s),v=s=>new Date(s).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}),h=c.useCallback(s=>{var a,r;return s.itemType==="song"?((a=x==null?void 0:x.find(n=>n._id===s.itemId))==null?void 0:a.title)||"Song":s.itemType==="album"?((r=m==null?void 0:m.find(n=>n._id===s.itemId))==null?void 0:r.title)||"Album":s.artistName||"Artist"},[x,m]),b=c.useMemo(()=>[...g].sort((a,r)=>new Date(r.purchasedAt)-new Date(a.purchasedAt)).filter(a=>{const r=h(a).toLowerCase(),n=p.toLowerCase(),S=r.includes(n)||a.paymentId.toLowerCase().includes(n),w=i==="all"?!0:i==="subscription"?a.itemType==="artist-subscription":a.itemType===i;return S&&w}),[g,h,p,i]);return e.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-100",children:[e.jsx(E,{}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Payment History"}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:p,onChange:s=>f(s.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg pl-10 pr-4 py-2 text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"text-slate-400"}),e.jsxs("select",{value:i,onChange:s=>N(s.target.value),className:"bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"song",children:"Songs"}),e.jsx("option",{value:"album",children:"Albums"}),e.jsx("option",{value:"subscription",children:"Subscriptions"})]})]})]}),j&&e.jsx("p",{className:"text-center py-12 text-slate-400",children:"Loading…"}),u&&e.jsx("p",{className:"text-center py-12 text-red-400",children:u}),!j&&!u&&b.length===0&&e.jsx("p",{className:"text-center py-12 text-slate-400",children:"No payments found"}),!j&&!u&&b.length>0&&e.jsx("div",{className:"space-y-3",children:b.map(s=>e.jsxs("div",{className:"border border-slate-700 rounded-lg bg-slate-800/70 hover:bg-slate-700/70 transition",children:[e.jsxs("button",{className:"w-full flex items-center justify-between p-4 text-left",onClick:()=>y(s._id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-900/40 flex items-center justify-center",children:e.jsx(T,{className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:h(s)}),e.jsxs("p",{className:"text-xs text-slate-400",children:[e.jsx(I,{className:"inline mr-1"}),v(s.purchasedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-sm",children:["₹",s.price]}),t===s._id?e.jsx(L,{className:"text-slate-400"}):e.jsx(_,{className:"text-slate-400"})]})]}),t===s._id&&e.jsxs("div",{className:"border-t border-slate-700 px-4 pb-4 pt-3 text-xs grid grid-cols-2 gap-x-6 gap-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Payment ID"}),e.jsx("p",{className:"text-slate-200",children:s.paymentId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Type"}),e.jsx("p",{className:"capitalize text-slate-200",children:s.itemType.replace("-"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Item"}),e.jsx("p",{className:"text-slate-200",children:h(s)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Amount"}),e.jsxs("p",{className:"text-slate-200",children:["₹",s.price]})]})]})]},s._id))})]})]})]})};export{B as default};
