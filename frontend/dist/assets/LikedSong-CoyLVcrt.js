import{u as E,r as n,b as a,I as w,J as P,j as s,K as T,L as M,o as U,p as C}from"./index-Bq32TEZ8.js";import{b as I,c as R,d as D,e as Y,f as q,S as A,a as p}from"./index-rtsjbbxS.js";import{S as F}from"./SongList-CIZ81_nY.js";import{U as G}from"./UserLayout-yuTYACIF.js";import{f as H}from"./index-DsaIwXDl.js";import{U as J}from"./UserHeader-qhcX_yJu.js";/* empty css                 */import"./iconBase-Cst9Bakk.js";import"./index-BLpoeeon.js";import"./index-BB54KNlg.js";import"./IconHeader-BhAI_0tO.js";import"./assets-Dbh41_OJ.js";import"./index-B6qKfaA3.js";const ae=()=>{const t=E(),[d,f]=n.useState(!1),[i,u]=n.useState([]),j=20,y=a(I),m=a(R),o=a(D),h=a(Y),b=a(q),c=a(e=>e.player.selectedSong),S=a(e=>e.player.status),r=n.useRef(),v=n.useCallback(e=>{d||(r.current&&r.current.disconnect(),r.current=new IntersectionObserver(l=>{l[0].isIntersecting&&o<h&&k()},{threshold:.1}),e&&r.current.observe(e))},[d,o,h]);n.useEffect(()=>(t(w({page:1,limit:j})),()=>{t(P()),r.current&&r.current.disconnect()}),[t]),n.useEffect(()=>{u(y)},[y]);const k=async()=>{if(!(d||o>=h)){f(!0);try{await t(w({page:o+1,limit:j}))}finally{f(!1)}}},N=e=>{t(U(e)),(S!=="playing"||c!==e)&&t(C())},L=async e=>{(await t(T(e))).meta.requestStatus==="fulfilled"&&(t(M(e)),u(g=>g.filter(x=>x._id!==e)))},_=o<h&&i.length<m;return s.jsxs(G,{children:[s.jsx(J,{}),s.jsx(A,{baseColor:"#1f2937",highlightColor:"#374151",children:s.jsxs("div",{className:"min-h-screen w-[96%] py-8 px-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h2",{className:"md:text-3xl text-2xl font-bold text-white",children:"Liked Songs"}),m>0&&s.jsxs("span",{className:"text-gray-400",children:[m," ",m===1?"song":"songs"]})]}),b==="loading"&&i.length===0?s.jsx("div",{className:"space-y-4",children:[...Array(10)].map((e,l)=>s.jsx("div",{className:"flex items-center justify-between bg-white/10 rounded-xl shadow-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-4 w-full",children:[s.jsx(p,{width:50,height:50,circle:!0}),s.jsxs("div",{className:"flex-1",children:[s.jsx(p,{width:200,height:20}),s.jsx(p,{width:150,height:16,className:"mt-2"})]}),s.jsx(p,{width:60,height:20})]})},l))}):i.length===0?s.jsxs("div",{className:"text-white px-4 py-2",children:[s.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"You haven't liked any songs yet."}),s.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Go explore and tap the ❤️ icon to like songs."})]}):s.jsxs("div",{className:"flex flex-col gap-4",children:[i.map((e,l)=>{var g,x;return s.jsx("div",{ref:l===i.length-1?v:null,className:"flex items-center justify-between bg-white/10 rounded-xl shadow-lg p-4 hover:bg-white/20 transition relative my-2 mx-0 group",children:s.jsx(F,{songId:e._id,img:e.coverImage||((g=e.album)==null?void 0:g.coverImage)||"/images/placeholder.png",songName:e.title,singerName:((x=e.artist)==null?void 0:x.name)||e.singer,seekTime:H(e.duration),onPlay:()=>N(e),isSelected:(c==null?void 0:c._id)===e._id,isPlaying:c===e._id&&S==="playing",onLikeToggle:()=>L(e._id)})},e._id)}),d&&s.jsx("div",{className:"flex justify-center py-4",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white"})}),!_&&i.length>0&&s.jsx("p",{className:"text-center text-gray-400 py-4",children:"You've reached the end of your liked songs"})]})]})})]})};export{ae as default};
