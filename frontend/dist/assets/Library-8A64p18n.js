import{u as k,a as U,r,b as l,D as A,S as P,n as C,j as e,o as D,p as L}from"./index-Bq32TEZ8.js";import{U as $}from"./UserLayout-yuTYACIF.js";import{U as E}from"./UserHeader-qhcX_yJu.js";import{S as R}from"./SongList-CIZ81_nY.js";import{f as I}from"./index-DsaIwXDl.js";import{S as T,a as i}from"./index-rtsjbbxS.js";/* empty css                 */import"./IconHeader-BhAI_0tO.js";import"./assets-Dbh41_OJ.js";import"./iconBase-Cst9Bakk.js";import"./index-B6qKfaA3.js";import"./index-BB54KNlg.js";import"./index-BLpoeeon.js";const W=()=>{const a=k(),g=U(),[o,N]=r.useState(1),[p,v]=r.useState([]);r.useRef(null);const c=r.useRef(),m=l(s=>s.player.selectedSong),u=l(s=>s.songs.status),f=l(s=>s.songs.totalPages),j=l(s=>s.userDashboard.subscriptions),n=l(s=>s.userDashboard.purchases),h=l(s=>s.userDashboard.loading);r.useEffect(()=>{a(A()),a(P())},[a]),r.useEffect(()=>{a(C({type:"library",page:o,limit:20})).then(s=>{var t;(t=s.payload)!=null&&t.songs&&v(d=>{const w=new Set(d.map(x=>x._id)),_=s.payload.songs.filter(x=>!w.has(x._id));return[...d,..._]})})},[a,o]);const S=s=>{a(D(s)),a(L())};r.useCallback(s=>{u!=="loading"&&(c.current&&c.current.disconnect(),c.current=new IntersectionObserver(t=>{t[0].isIntersecting&&o<f&&N(d=>d+1)}),s&&c.current.observe(s))},[u,o,f]);const b=5,y=[];for(let s=0;s<p.length;s+=b)y.push(p.slice(s,s+b));return e.jsxs($,{children:[e.jsx(E,{}),e.jsx(T,{baseColor:"#1f2937",highlightColor:"#374151",children:e.jsxs("div",{className:"text-white px-4 py-2 flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"md:text-xl text-lg font-semibold mb-2",children:"Subscribed Artists"}),h?e.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar",children:[...Array(5)].map((s,t)=>e.jsxs("div",{children:[e.jsx(i,{width:80,height:80,circle:!0}),e.jsx(i,{width:100,height:12,className:"mt-2"})]},`artist-skeleton-${t}`))}):j.length>0?e.jsx("div",{className:"flex gap-6 overflow-x-auto no-scrollbar",children:j.map(s=>e.jsxs("div",{onClick:()=>g(`/artist/${s.artist.slug}`),className:"cursor-pointer text-center",children:[e.jsx("img",{src:s.artist.image||"/images/placeholder.png",alt:s.artist.name,className:"w-20 h-20 rounded-full object-cover border-2 border-blue-500 shadow-md"}),e.jsx("p",{className:"text-sm mt-2",children:s.artist.name})]},s._id))}):e.jsx("p",{className:"text-gray-400 text-sm",children:"You're not subscribed to any artists."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"md:text-xl text-lg font-semibold mb-2",children:"Purchased Albums"}),h?e.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar",children:[...Array(5)].map((s,t)=>e.jsxs("div",{children:[e.jsx(i,{height:160,width:160,className:"rounded-xl"}),e.jsx(i,{width:100,height:12,className:"mt-2"})]},`album-skel-${t}`))}):n.albums.length>0?e.jsx("div",{className:"flex gap-6 overflow-x-auto no-scrollbar",children:n.albums.map(s=>{var t;return e.jsxs("div",{onClick:()=>g(`/album/${s.slug||s._id}`),className:"min-w-[160px] cursor-pointer",children:[e.jsx("img",{src:s.coverUrl||"/images/placeholder.png",alt:s.title,className:"w-40 h-40 object-cover rounded-xl border-2 border-blue-500 shadow-md"}),e.jsx("p",{className:"text-sm mt-2",children:s.title}),e.jsx("p",{className:"text-xs text-gray-400",children:((t=s.artist)==null?void 0:t.name)||"Various Artists"})]},s._id)})}):e.jsx("p",{className:"text-gray-400 text-sm",children:"No albums purchased yet."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"md:text-xl text-lg font-semibold mt-6 mb-2",children:"Purchased Songs"}),h?e.jsx("div",{className:"flex flex-col gap-4",children:[...Array(5)].map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{height:50,width:50,circle:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{width:120,height:16}),e.jsx(i,{width:80,height:12})]})]},`song-skel-${t}`))}):n.songs.length>0?e.jsx("div",{className:"flex flex-col gap-4",children:n.songs.map(s=>{var t;return e.jsx(R,{songId:s._id,img:s.coverUrl||"/images/placeholder.png",songName:s.title,singerName:((t=s.artist)==null?void 0:t.name)||"Unknown Artist",seekTime:I(s.duration||0),onPlay:()=>S(s),isSelected:(m==null?void 0:m._id)===s._id},s._id)})}):e.jsx("p",{className:"text-gray-400 text-sm",children:"No songs purchased yet."})]})]})})]})};export{W as default};
