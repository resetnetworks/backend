import{e as j,a as g,r as t,j as s,t as n,d as N}from"./index-Bq32TEZ8.js";import{a as x,A as v,b as y}from"./index-BVQBu9ri.js";import{I as P}from"./IconHeader-BhAI_0tO.js";import"./iconBase-Cst9Bakk.js";import"./assets-Dbh41_OJ.js";const A=()=>{const{token:u}=j(),p=g(),[r,w]=t.useState(""),[i,h]=t.useState(""),[o,f]=t.useState(!1),[a,d]=t.useState(!1),b=async e=>{var c,m;if(e.preventDefault(),r!==i){n.error("Passwords do not match");return}d(!0);try{const l=await N.post(`http://localhost:3000/api/users/reset-password/${u}`,{password:r});n.success(l.data.message),p("/login")}catch(l){n.error(((m=(c=l.response)==null?void 0:c.data)==null?void 0:m.message)||"Failed to reset password")}finally{d(!1)}};return s.jsxs("section",{className:"w-full min-h-screen bg-image flex flex-col items-center",children:[s.jsx(P,{}),s.jsxs("div",{className:"text-white mt-auto mb-auto flex flex-col justify-around items-center",children:[s.jsxs("h1",{className:"text-4xl mb-6 text-center",children:[s.jsx("span",{className:"text-blue-700",children:"reset"})," your password"]}),s.jsxs("form",{className:"md:w-[650px] w-[95vw] rounded-t-lg md:py-6 md:px-12 py-3 px-6 flex items-center flex-col border-b-[3px] border-blue-800 bg-gradient-to-br from-[#0a0a23] to-[#0d1b3f]",onSubmit:b,children:[s.jsx("div",{className:"w-full mb-1",children:s.jsx("label",{htmlFor:"password",className:"md:text-xl text-lg",children:"new password"})}),s.jsxs("div",{className:"w-full relative",children:[s.jsx(x,{className:"inside-icon"}),s.jsx("input",{required:!0,type:o?"text":"password",className:"input-login",value:r,onChange:e=>w(e.target.value),disabled:a,placeholder:"Enter your new password"}),s.jsx("div",{className:"eye-icon",onClick:()=>f(e=>!e),children:o?s.jsx(v,{}):s.jsx(y,{})})]}),s.jsx("div",{className:"w-full mt-5 mb-1",children:s.jsx("label",{htmlFor:"confirmPassword",className:"md:text-xl text-lg",children:"confirm password"})}),s.jsxs("div",{className:"w-full relative",children:[s.jsx(x,{className:"inside-icon"}),s.jsx("input",{required:!0,type:o?"text":"password",className:"input-login",value:i,onChange:e=>h(e.target.value),disabled:a,placeholder:"Re-enter your password"})]}),s.jsx("div",{className:"button-wrapper mt-9 shadow-sm shadow-black",children:s.jsx("button",{className:"custom-button",disabled:a,children:a?"Resetting...":"Reset Password"})}),s.jsxs("p",{className:`mt-4 ${a?"pointer-events-none opacity-50":""}`,children:["Go back to"," ",s.jsx("a",{href:"/login",className:"text-blue-800 underline",children:"Login"})]})]})]})]})};export{A as default};
