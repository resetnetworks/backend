import{u as E,a as ae,j as e,W as pe,t as A,r as c,b as F,X as be,Y as fe,Z as se,_ as je,m as X,$ as Y,a0 as ye,a1 as Ne,a2 as ve,a3 as we,F as te,n as Ae,a4 as Se,a5 as Ce,a6 as Ie}from"./index-Bq32TEZ8.js";import{c as le,d as re,g as K,b as ke}from"./artistsSelectors-BMpZxlMU.js";import{G as ie}from"./iconBase-Cst9Bakk.js";import{F as Fe,g as H,h as _,i as J,j as Pe,k as De,l as Le,m as ne,n as Oe,o as Q,p as W,S as ce,a as de,q as ee,r as oe,t as Te,u as me,v as Me,w as Ue,x as Re,y as _e,z as ze,f as $e}from"./index-rtsjbbxS.js";import{I as qe}from"./IconHeader-BhAI_0tO.js";/* empty css                 */import{I as Ee,f as Be}from"./index-DsaIwXDl.js";import{b as xe,c as Ge,d as Z}from"./index-BLpoeeon.js";import{e as ue,d as He,f as Ve,g as Je,h as We}from"./albumsSelector-BPwziAEI.js";import"./assets-Dbh41_OJ.js";function Xe(s){return ie({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(s)}function Ye(s){return ie({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(s)}const Ze=({activeTab:s,setActiveTab:d})=>{const r=E(),p=ae(),h=async()=>{await r(pe()),A.success("Logged out successfully"),p("/login")};return e.jsxs("div",{className:"fixed md:static inset-y-0 left-0 w-64 bg-gray-800 z-40",children:[e.jsx("div",{className:"flex items-center justify-center h-16 px-4 bg-gray-900",children:e.jsx("h1",{className:"text-xl font-bold text-blue-400",children:"Admin"})}),e.jsx("nav",{className:"px-4 py-6 h-[calc(100%-8rem)] overflow-y-auto",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>d("dashboard"),className:`flex items-center w-full px-4 py-3 rounded-lg ${s==="dashboard"?"bg-blue-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(Fe,{className:"mr-3"}),"Dashboard"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>d("artists"),className:`flex items-center w-full px-4 py-3 rounded-lg ${s==="artists"?"bg-blue-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(H,{className:"mr-3"}),"Artists"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>d("albums"),className:`flex items-center w-full px-4 py-3 rounded-lg ${s==="albums"?"bg-blue-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(_,{className:"mr-3"}),"Albums"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>d("songs"),className:`flex items-center w-full px-4 py-3 rounded-lg ${s==="songs"?"bg-blue-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(J,{className:"mr-3"}),"Songs"]})}),e.jsx("li",{className:"pt-4 mt-4 border-t border-gray-700",children:e.jsxs("button",{onClick:()=>d("settings"),className:`flex items-center w-full px-4 py-3 rounded-lg ${s==="settings"?"bg-blue-900 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(Pe,{className:"mr-3"}),"Settings"]})})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gray-900",children:e.jsxs("button",{onClick:h,className:"flex items-center w-full px-4 py-3 rounded-lg text-gray-300 hover:bg-gray-700",children:[e.jsx(De,{className:"mr-3"}),"Logout"]})})]})},Ke=({activeTab:s})=>e.jsx("header",{className:"shadow-sm",children:e.jsx(qe,{})}),Qe=({children:s,activeTab:d,setActiveTab:r})=>{const[p,h]=c.useState(!0);return e.jsxs("div",{className:"flex h-screen bg-gray-900 text-gray-100",children:[e.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 bg-gray-800 p-2 rounded-md",onClick:()=>h(!p),children:p?e.jsx(Ye,{size:24}):e.jsx(Xe,{size:24})}),e.jsx("div",{className:`${p?"translate-x-0":"-translate-x-full"} md:translate-x-0 transform fixed md:static inset-y-0 left-0 w-64 bg-gray-800 transition-transform duration-200 ease-in-out z-40`,children:e.jsx(Ze,{activeTab:d,setActiveTab:r})}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx(Ke,{activeTab:d}),e.jsx("main",{className:"p-6",children:s})]})]})},es=({artists:s,albums:d,songs:r})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-900 to-blue-800 p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 text-sm",children:"Total Artists"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:s.length})]}),e.jsx("div",{className:"bg-blue-700 p-3 rounded-full",children:e.jsx(H,{className:"text-blue-300 text-xl"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-900 to-blue-800 p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 text-sm",children:"Total Albums"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:d.length})]}),e.jsx("div",{className:"bg-blue-700 p-3 rounded-full",children:e.jsx(_,{className:"text-blue-300 text-xl"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-900 to-blue-800 p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300 text-sm",children:"Total Songs"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:r.length})]}),e.jsx("div",{className:"bg-blue-700 p-3 rounded-full",children:e.jsx(J,{className:"text-blue-300 text-xl"})})]})})]}),ss=({artists:s,albums:d})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-700 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Recent Artists"}),e.jsx("ul",{className:"space-y-4",children:s.slice(0,3).map(r=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-900 p-2 rounded-full mr-4",children:e.jsx(H,{className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.songs," songs • ",r.albums," albums"]})]})]},r.id))})]}),e.jsxs("div",{className:"bg-gray-700 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Recent Albums"}),e.jsx("ul",{className:"space-y-4",children:d.slice(0,3).map(r=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-900 p-2 rounded-full mr-4",children:e.jsx(_,{className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.artist," • ",r.year]})]})]},r.id))})]})]}),ts=({artists:s,albums:d,songs:r})=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Dashboard Overview"}),e.jsx(es,{artists:s,albums:d,songs:r}),e.jsx(ss,{artists:s,albums:d})]}),as=({title:s,columns:d,data:r,addButton:p,loading:h,error:i,onEdit:a,onDelete:b,onViewPayments:l})=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s}),p]}),h?e.jsx("div",{className:"text-gray-300 text-center py-6",children:"Loading..."}):i?e.jsx("div",{className:"text-red-400 text-center py-6",children:i}):r.length===0?e.jsx("div",{className:"text-gray-400 text-center py-6",children:"No data available"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{children:e.jsx("tr",{children:d.map((o,S)=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:o},S))})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:r.map((o,S)=>e.jsxs("tr",{className:"hover:bg-gray-700/50",children:[d.slice(0,-1).map((t,y)=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:o[t.toLowerCase()]||""},y)),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[a&&e.jsxs("button",{className:"text-blue-500 hover:text-blue-400 flex items-center",onClick:()=>a(o.artistObj||o),title:"Edit",children:[e.jsx(Le,{className:"mr-1"}),e.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),b&&e.jsxs("button",{className:"text-red-500 hover:text-red-400 flex items-center",onClick:()=>b(o),title:"Delete",children:[e.jsx(ne,{className:"mr-1"}),e.jsx("span",{className:"hidden md:inline",children:"Delete"})]}),l&&e.jsxs("button",{className:"text-green-500 hover:text-green-400 flex items-center",onClick:()=>l(o._id),title:"View Payments",children:[e.jsx(Oe,{className:"mr-1"}),e.jsx("span",{className:"hidden md:inline",children:"Payments"})]})]})})]},S))})]})})]}),ls=({isOpen:s,onClose:d,initialData:r=null})=>{const p=E(),h=F(le),i=F(re),[a,b]=c.useState({name:"",bio:"",subscriptionPrice:"0",location:""}),[l,o]=c.useState(null),[S,t]=c.useState(null);c.useEffect(()=>{var m;r?(b({name:r.name||"",bio:r.bio||"",subscriptionPrice:((m=r.subscriptionPrice)==null?void 0:m.toString())||"0",location:r.location||""}),t(r.image||null)):(b({name:"",bio:"",subscriptionPrice:"0",location:""}),o(null),t(null))},[r]);const y=m=>{b({...a,[m.target.name]:m.target.value})},v=m=>{const N=m.target.files[0];if(o(N),N){const x=new FileReader;x.onloadend=()=>{t(x.result)},x.readAsDataURL(N)}},C=async m=>{if(m.preventDefault(),!a.name.trim()){A.error("Artist name is required");return}if(a.location.trim().length<2){A.error("Location must be at least 2 characters");return}const N=new FormData;N.append("name",a.name),N.append("bio",a.bio),N.append("subscriptionPrice",a.subscriptionPrice),N.append("location",a.location),l&&N.append("coverImage",l);try{r?(await p(be({id:r._id,formData:N})).unwrap(),A.success("Artist updated successfully!")):(await p(fe(N)).unwrap(),A.success("Artist created successfully!")),d()}catch(x){A.error(x||"Failed to submit artist")}};if(!s)return null;const j=r?"Edit":"Create";return e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[j," Artist"]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",children:e.jsx(Q,{})})]}),i&&e.jsx("p",{className:"text-red-500 mb-4",children:i}),e.jsxs("form",{onSubmit:C,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-1 text-gray-300",children:"Artist Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:y,className:"w-full border p-2 rounded bg-gray-800 border-gray-700 text-white",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-1 text-gray-300",children:"Bio"}),e.jsx("textarea",{name:"bio",value:a.bio,onChange:y,className:"w-full border p-2 rounded bg-gray-800 border-gray-700 text-white",rows:"4"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-1 text-gray-300",children:"Location *"}),e.jsx("input",{type:"text",name:"location",value:a.location,onChange:y,className:"w-full border p-2 rounded bg-gray-800 border-gray-700 text-white",required:!0,minLength:2})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-1 text-gray-300",children:"Subscription Price"}),e.jsx("input",{type:"number",name:"subscriptionPrice",value:a.subscriptionPrice,onChange:y,className:"w-full border p-2 rounded bg-gray-800 border-gray-700 text-white",min:"0"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-300",children:"Cover Image"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed rounded-lg cursor-pointer bg-gray-800 border-gray-600 hover:border-gray-500",children:[S?e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[e.jsx("img",{src:S,alt:"Preview",className:"max-h-full max-w-full object-contain rounded"}),e.jsx("div",{className:"absolute bottom-4 bg-black bg-opacity-70 text-white px-3 py-1 rounded text-sm",children:"Click to change"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Ee,{className:"text-gray-400 text-4xl"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-400",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, JPEG (MAX. 5MB)"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden"})]})})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium transition-colors",children:h?`${j}ing...`:`${j} Artist`})]})]})})},rs=()=>{const s=E(),d=ae(),[r,p]=c.useState(!1),[h,i]=c.useState(null),[a,b]=c.useState(""),l=c.useRef(!1),o=F(K),S=F(le),t=F(re);c.useEffect(()=>{l.current||(l.current=!0,s(se()))},[s]);const y=["ID","Name","Songs","Albums","Actions"],C=o.filter(x=>x.name.toLowerCase().includes(a.toLowerCase())||(x.location||"").toLowerCase().includes(a.toLowerCase())).map((x,L)=>{var f,g;return{id:L+1,name:x.name,songs:x.songCount||((f=x.songs)==null?void 0:f.length)||0,albums:x.albumCount||((g=x.albums)==null?void 0:g.length)||0,_id:x._id,artistObj:x}}),j=x=>{i(x),p(!0)},m=x=>{window.confirm(`Are you sure you want to delete "${x.name}"?`)&&s(je(x._id)).then(()=>{s(se())})},N=x=>{d(`/admin/payments/${x}`)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Artists"}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or location...",value:a,onChange:x=>b(x.target.value),className:"w-full bg-gray-700 text-white pl-10 pr-4 py-2 rounded border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>{i(null),p(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[e.jsx(H,{className:"mr-2"})," Add Artist"]})]}),S?e.jsx(ce,{baseColor:"#1f2937",highlightColor:"#374151",children:e.jsx("div",{className:"space-y-4",children:e.jsx(de,{height:60,count:5})})}):t?e.jsxs("div",{className:"text-red-400 text-sm text-center mb-4",children:["Error: ",t]}):C.length===0?e.jsx("div",{className:"text-center py-10 text-gray-400",children:'No artists found. Click "Add Artist" to create one.'}):e.jsx(as,{title:"",columns:y,data:C,loading:!1,error:null,onEdit:j,onDelete:m,onViewPayments:N}),e.jsx(ls,{isOpen:r,onClose:()=>{p(!1),i(null)},initialData:h})]})},is=({album:s,onDelete:d,onUpdate:r})=>{var p,h;return e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-700",children:[e.jsx("div",{className:"h-48 bg-gray-700 relative",children:s.coverImage?e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(_,{className:"text-4xl"})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"bg-blue-900 p-2 rounded-full mr-3",children:e.jsx(_,{className:"text-blue-400 text-lg"})}),e.jsx("h3",{className:"text-lg font-semibold flex-1",children:s.title})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-gray-400 text-sm",children:`${s.description.slice(0,120)}..`||"No description available"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(xe,{className:"mr-2"}),e.jsx("span",{children:s.releaseDate?new Date(s.releaseDate).toLocaleDateString():"No date"})]}),e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(ee,{className:"mr-2"}),e.jsxs("span",{children:["$",((p=s.price)==null?void 0:p.toFixed(2))||"0.00"]})]})]}),e.jsx("div",{className:"text-gray-300 mb-4",children:e.jsx("span",{children:s.accessType})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:(h=s.artist)==null?void 0:h.name}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>r(s),className:"text-blue-500 hover:text-blue-400 px-3 py-1 rounded flex items-center",children:"Edit"}),e.jsxs("button",{onClick:()=>d(s._id),className:"text-red-800 hover:text-red-400 px-3 py-1 rounded flex items-center",children:[e.jsx(ne,{className:"mr-1"})," Delete"]})]})]})]})]})},ns=({isOpen:s,onClose:d,onSubmit:r,artists:p=[],isLoading:h=!1,error:i=null,initialData:a=null,isEdit:b=!1})=>{const[l,o]=c.useState({title:"",description:"",artist:"",artistId:"",coverImage:null,releaseDate:new Date().toISOString().split("T")[0],price:0,accessType:"subscription",coverImageUrl:"",genre:""}),[S,t]=c.useState(""),[y,v]=c.useState(!1),C=c.useRef(null);c.useEffect(()=>{var f,g,D;a&&s?(o({title:a.title||"",description:a.description||"",artist:((f=a.artist)==null?void 0:f.name)||"",artistId:((g=a.artist)==null?void 0:g._id)||"",coverImage:null,releaseDate:a.releaseDate?new Date(a.releaseDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],price:a.price||0,accessType:a.accessType||"subscription",coverImageUrl:a.coverImage||"",genre:Array.isArray(a.genre)?a.genre.join(", "):a.genre||""}),t(((D=a.artist)==null?void 0:D.name)||"")):s&&(o({title:"",description:"",artist:"",artistId:"",coverImage:null,releaseDate:new Date().toISOString().split("T")[0],price:0,accessType:"subscription",coverImageUrl:"",genre:""}),t(""))},[a,s,b]);const j=p.filter(f=>f.name.toLowerCase().includes(S.toLowerCase())),m=f=>{const{name:g,value:D}=f.target;o(M=>({...M,[g]:D}))},N=f=>{const g=f.target.files[0];g&&o(D=>({...D,coverImage:g,coverImageUrl:URL.createObjectURL(g)}))},x=f=>{o(g=>({...g,artist:f.name,artistId:f._id})),t(f.name),v(!1)},L=f=>{f.preventDefault();const g=new FormData;g.append("title",l.title),g.append("description",l.description),g.append("artist",l.artistId),g.append("releaseDate",l.releaseDate),g.append("accessType",l.accessType),g.append("genre",l.genre),l.accessType==="purchase-only"&&g.append("price",parseFloat(l.price)),l.coverImage?g.append("coverImage",l.coverImage):b&&l.coverImageUrl&&!l.coverImage&&g.append("keepExistingImage","true"),r(g)};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[e.jsx(_,{className:"mr-2 text-blue-400"}),b?"Edit Album":"Add New Album"]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",disabled:h,children:e.jsx(Q,{})})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Cover Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500 transition",onClick:()=>!h&&C.current.click(),children:[l.coverImageUrl?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:l.coverImageUrl,alt:"Preview",className:"h-32 w-32 object-cover rounded-md mb-2"}),l.coverImage&&e.jsx("span",{className:"text-sm text-gray-400",children:l.coverImage.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mx-auto text-3xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-400",children:"Click to upload image"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG (Max 5MB)"})]}),e.jsx("input",{type:"file",ref:C,onChange:N,accept:"image/*",className:"hidden",disabled:h})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Title*"}),e.jsx("input",{type:"text",name:"title",value:l.title,onChange:m,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Artist*"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(W,{className:"text-gray-400"})}),e.jsx("input",{type:"text",value:S,onChange:f=>{t(f.target.value),v(!0)},onFocus:()=>v(!0),className:"w-full bg-gray-700 text-white px-4 py-2 pl-10 rounded",placeholder:"Search artist...",required:!0,disabled:h||b,readOnly:b})]}),y&&j.length>0&&!h&&!b&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 rounded-md shadow-lg max-h-60 overflow-auto",children:j.map(f=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-600 cursor-pointer",onClick:()=>x(f),children:f.name},f._id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:l.description,onChange:m,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Release Date*"}),e.jsx("input",{type:"date",name:"releaseDate",value:l.releaseDate,onChange:m,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Access Type*"}),e.jsxs("select",{name:"accessType",value:l.accessType,onChange:m,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",required:!0,disabled:h,children:[e.jsx("option",{value:"subscription",children:"Subscription"}),e.jsx("option",{value:"purchase-only",children:"Purchase Only"})]})]}),l.accessType==="purchase-only"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Price*"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(ee,{className:"text-gray-400"})}),e.jsx("input",{type:"number",name:"price",value:l.price,onChange:m,min:"0",step:"0.01",className:"w-full bg-gray-700 text-white px-4 py-2 pl-10 rounded",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 mb-2",children:"Genres (comma-separated)"}),e.jsx("input",{type:"text",name:"genre",value:l.genre,onChange:m,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",placeholder:"e.g., Pop, Jazz"})]}),i&&e.jsx("div",{className:"text-red-400 text-sm",children:i})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 rounded text-gray-300 hover:text-white",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center min-w-24 justify-center",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"animate-spin mr-2"}),b?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2"}),b?"Update Album":"Add Album"]})})]})]})]})}):null},cs=()=>{const s=E(),d=F(ue),r=F(He),p=F(Ve),h=F(K),i=F(Je),a=F(We),[b,l]=c.useState(!1),[o,S]=c.useState(""),[t,y]=c.useState(a.page||1),[v,C]=c.useState(a.limit||10);c.useEffect(()=>{a.page&&a.page!==t&&y(a.page),a.limit&&a.limit!==v&&C(a.limit)},[a.page,a.limit]),c.useEffect(()=>{s(X({page:t,limit:v}))},[s,t,v]);const j=async n=>{try{i?(await s(ve({albumId:i._id,formData:n})).unwrap(),A.success("Album updated successfully")):(await s(we(n)).unwrap(),A.success("Album created successfully")),l(!1),s(Y()),s(X({page:t,limit:v}))}catch(I){A.error((I==null?void 0:I.message)||"Failed to save album")}},m=n=>{s(ye(n)),l(!0)},N=async n=>{if(window.confirm("Are you sure you want to delete this album?"))try{await s(Ne(n)).unwrap(),A.success("Album deleted successfully"),d.length===1&&t>1?y(t-1):s(X({page:t,limit:v}))}catch(w){A.error((w==null?void 0:w.message)||"Failed to delete album")}},x=()=>{l(!1),s(Y())},L=n=>{y(n)},f=()=>{t<a.totalPages&&y(t+1)},g=()=>{t>1&&y(t-1)},D=n=>{const I=Number(n.target.value);C(I),y(1)},M=d.filter(n=>{var I,w;return n.title.toLowerCase().includes(o.toLowerCase())||((w=(I=n.artist)==null?void 0:I.name)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))}),$=()=>{const n=[],{totalPages:w}=a;if(w<=5)for(let T=1;T<=w;T++)n.push(T);else{let T=Math.max(1,t-Math.floor(2.5)),U=T+5-1;U>w&&(U=w,T=U-5+1),T>1&&(n.push(1),T>2&&n.push("..."));for(let B=T;B<=U;B++)n.push(B);U<w&&(U<w-1&&n.push("..."),n.push(w))}return n};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Albums"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by title or artist...",value:o,onChange:n=>S(n.target.value),className:"w-full bg-gray-700 text-white pl-10 pr-4 py-2 rounded"})]}),e.jsxs("button",{onClick:()=>{s(Y()),l(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[e.jsx(me,{className:"mr-2"})," Add Album"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-400 mr-2",children:"Show:"}),e.jsxs("select",{value:v,onChange:D,className:"bg-gray-700 text-white px-3 py-1 rounded",children:[e.jsx("option",{value:8,children:"8"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:40,children:"40"}),e.jsx("option",{value:80,children:"80"})]}),e.jsx("span",{className:"text-gray-400 ml-2",children:"per page"})]}),e.jsxs("div",{className:"text-gray-400",children:["Showing ",(t-1)*v+1," to"," ",Math.min(t*v,a.total)," of"," ",a.total," albums"]})]}),r?e.jsx(ce,{baseColor:"#1f2937",highlightColor:"#374151",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(v)].map((n,I)=>e.jsx("div",{children:e.jsx(de,{height:200})},I))})}):p?e.jsxs("p",{className:"text-red-500 text-center mb-4",children:["Error: ",p]}):M.length===0?e.jsx("div",{className:"text-center text-gray-400 py-10",children:'No albums found. Click "Add Album" to create one.'}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map(n=>e.jsx(is,{album:n,onDelete:()=>N(n._id),onUpdate:()=>m(n)},n._id))}),a.totalPages>1&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("nav",{className:"inline-flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>L(1),disabled:t===1,className:"p-2 rounded-md text-gray-400 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"First page",children:e.jsx(Me,{})}),e.jsx("button",{onClick:g,disabled:t===1,className:"p-2 rounded-md text-gray-400 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:e.jsx(Ue,{})}),$().map((n,I)=>e.jsx("button",{onClick:()=>typeof n=="number"?L(n):null,className:`px-3 py-1 rounded-md ${n===t?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"} ${typeof n!="number"?"cursor-default":""}`,disabled:typeof n!="number","aria-current":n===t?"page":void 0,"aria-label":typeof n=="number"?`Page ${n}`:"More pages",children:n},I)),e.jsx("button",{onClick:f,disabled:t===a.totalPages,className:"p-2 rounded-md text-gray-400 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:e.jsx(Re,{})}),e.jsx("button",{onClick:()=>L(a.totalPages),disabled:t===a.totalPages,className:"p-2 rounded-md text-gray-400 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Last page",children:e.jsx(_e,{})})]})})]}),e.jsx(ns,{isOpen:b,onClose:x,onSubmit:j,artists:h,initialData:i,isEdit:!!i})]})},ds=({song:s,onDelete:d,onEdit:r})=>{var i,a,b;const p=Array.isArray(s.genre)?s.genre:[s.genre],h=()=>{window.confirm(`Are you sure you want to delete the song "${s.title}"?`)&&d(s._id)};return e.jsxs("div",{className:"bg-gray-800 rounded-md overflow-hidden shadow-md border border-gray-700 text-sm w-full mx-auto",children:[e.jsx("div",{className:"h-36 bg-gray-700 relative",children:s.coverImage?e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(J,{className:"text-3xl"})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-base font-medium text-white truncate mb-1",children:s.title}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1 mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"mr-1"})," ",((i=s.artist)==null?void 0:i.name)||"Unknown Artist"]}),((a=s.album)==null?void 0:a.title)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"mr-1"})," ",s.album.title]})]}),e.jsxs("div",{className:"text-xs text-gray-300 space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{className:"mr-1"}),"Duration: ",Be(s.duration)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"mr-1"}),new Date(s.releaseDate).toLocaleDateString()]}),e.jsxs("div",{children:["Genres: ",p.filter(Boolean).map((l,o)=>e.jsx("span",{className:"bg-gray-700 text-gray-200 px-2 py-0.5 rounded mr-1",children:l},o))]}),e.jsxs("div",{children:["Access: ",e.jsx("span",{className:"text-white",children:s.accessType==="purchase-only"?"Purchase Only":"Subscription"}),s.accessType==="purchase-only"&&e.jsxs("span",{className:"ml-3 flex items-center",children:[e.jsx(ee,{className:"mr-1"})," $",(b=s.price)==null?void 0:b.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>r(s),className:"text-blue-500 hover:text-blue-400 text-xs",children:"Edit"}),e.jsx("button",{onClick:h,className:"text-red-500 hover:text-red-400 text-xs",children:"Delete"})]})]})]})},os=({isOpen:s,onClose:d,onSubmit:r,artists:p=[],initialAlbums:h=[],songToEdit:i=null})=>{const a=E(),[b,l]=c.useState(h),[o,S]=c.useState(!1),[t,y]=c.useState({title:"",artist:"",artistId:"",album:"",albumId:"",duration:0,coverImage:null,audioFile:null,genre:"",price:"",accessType:"subscription",albumOnly:!1,releaseDate:new Date().toISOString().split("T")[0]}),[v,C]=c.useState(""),[j,m]=c.useState(""),[N,x]=c.useState(!1),[L,f]=c.useState(!1),[g,D]=c.useState(!1),M=c.useRef(null),$=c.useRef(null),n=p.filter(u=>u.name.toLowerCase().includes(v.toLowerCase())),I=b.filter(u=>u.title.toLowerCase().includes(j.toLowerCase()));c.useEffect(()=>{var u,k,O,R,q,z,V;i?(S(!0),y({title:i.title,artist:((u=i.artist)==null?void 0:u.name)||"",artistId:((k=i.artist)==null?void 0:k._id)||"",album:((O=i.album)==null?void 0:O.title)||"",albumId:((R=i.album)==null?void 0:R._id)||"",duration:i.duration||0,coverImage:i.coverImage||null,audioFile:i.audioFile||null,genre:Array.isArray(i.genre)?i.genre.join(", "):i.genre||"",price:i.price||"",accessType:i.accessType||"subscription",albumOnly:i.albumOnly||!1,releaseDate:i.releaseDate||new Date().toISOString().split("T")[0]}),C(((q=i.artist)==null?void 0:q.name)||""),m(((z=i.album)==null?void 0:z.title)||""),(V=i.artist)!=null&&V._id&&a(te({artistId:i.artist._id,limit:100})).unwrap().then(P=>{l(P.albums)})):S(!1)},[i,a]),c.useEffect(()=>{t.artistId?a(te({artistId:t.artistId,limit:100})).unwrap().then(u=>{l(u.albums)}).catch(()=>{l([])}):l(h)},[t.artistId,a]);const w=u=>{const{name:k,value:O,type:R,checked:q}=u.target;y(z=>({...z,[k]:R==="checkbox"?q:O}))},T=u=>{const k=u.target.files[0];k&&y(O=>({...O,coverImage:k}))},U=u=>{const k=u.target.files[0];if(k){const O=new Audio;O.src=URL.createObjectURL(k),O.onloadedmetadata=()=>{y(R=>({...R,duration:Math.floor(O.duration),audioFile:k}))}}},B=u=>{y(k=>({...k,artist:u.name,artistId:u._id,album:"",albumId:""})),C(u.name),m(""),x(!1)},he=u=>{y(k=>({...k,album:u.title,albumId:u._id})),m(u.title),f(!1)},ge=async u=>{u.preventDefault(),D(!0);const{title:k,artistId:O,audioFile:R,accessType:q,price:z,albumOnly:V}=t;if(!k||!O){A.error("Title and artist are required"),D(!1);return}if(!o&&!R){A.error("Audio file is required"),D(!1);return}if(q==="purchase-only"&&!V&&(!z||parseFloat(z)<=0)){A.error("Purchase-only songs must have a valid price (unless album-only)"),D(!1);return}const P=new FormData;P.append("title",t.title),P.append("artist",t.artistId),t.albumId&&P.append("album",t.albumId),P.append("duration",t.duration),P.append("releaseDate",t.releaseDate),P.append("accessType",t.accessType),P.append("albumOnly",t.albumOnly),t.accessType==="purchase-only"&&(t.albumOnly?P.append("price",0):P.append("price",parseFloat(t.price)||0)),(t.genre?t.genre.split(",").map(G=>G.trim()).filter(G=>G):[]).forEach(G=>P.append("genre[]",G)),t.coverImage&&P.append("coverImage",t.coverImage),t.audioFile&&P.append("audio",t.audioFile);try{await r(P),d()}finally{D(!1)}};return c.useEffect(()=>{s||(y({title:"",artist:"",artistId:"",album:"",albumId:"",duration:0,coverImage:null,audioFile:null,genre:"",price:"",accessType:"subscription",albumOnly:!1,releaseDate:new Date().toISOString().split("T")[0]}),C(""),m(""),x(!1),f(!1),l(h),M.current&&(M.current.value=""),$.current&&($.current.value=""))},[s]),s?e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center text-blue-400",children:[e.jsx(J,{className:"mr-2"}),o?"Edit Song":"Add New Song"]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white",disabled:g,children:e.jsx(Q,{})})]}),e.jsxs("form",{onSubmit:ge,className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-gray-300",children:"Title*"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:w,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"col-span-1 relative",children:[e.jsx("label",{className:"text-gray-300",children:"Artist*"}),e.jsx("input",{type:"text",value:v,onChange:u=>{C(u.target.value),x(!0)},onFocus:()=>x(!0),placeholder:"Search artist...",className:"w-full bg-gray-700 text-white px-4 py-2 rounded",required:!0}),N&&n.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 rounded shadow max-h-60 overflow-auto",children:n.map(u=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-600 cursor-pointer",onClick:()=>B(u),children:u.name},u._id))})]}),e.jsxs("div",{className:"col-span-1 relative",children:[e.jsx("label",{className:"text-gray-300",children:"Album"}),e.jsx("input",{type:"text",value:j,onChange:u=>{m(u.target.value),f(!0)},onFocus:()=>f(!0),className:"w-full bg-gray-700 text-white px-4 py-2 rounded",disabled:!t.artistId,placeholder:t.artistId?"":"Select artist first"}),L&&I.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 rounded shadow max-h-60 overflow-auto",children:I.map(u=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-600 cursor-pointer",onClick:()=>he(u),children:u.title},u._id))})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"text-gray-300",children:"Access Type"}),e.jsxs("select",{name:"accessType",value:t.accessType,onChange:w,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",required:!0,children:[e.jsx("option",{value:"subscription",children:"Subscription"}),e.jsx("option",{value:"purchase-only",children:"Purchase Only"})]})]}),t.accessType==="purchase-only"&&e.jsx("div",{className:"col-span-1",children:e.jsxs("label",{className:"text-gray-300 flex items-center",children:[e.jsx("input",{type:"checkbox",name:"albumOnly",checked:t.albumOnly,onChange:w,className:"mr-2"}),"Album Only (cannot be purchased individually)"]})}),t.accessType==="purchase-only"&&!t.albumOnly&&e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"text-gray-300",children:"Price*"}),e.jsx("input",{type:"number",name:"price",value:t.price,onChange:w,className:"w-full bg-gray-700 text-white px-4 py-2 rounded",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"text-gray-300",children:"Genre (comma-separated)"}),e.jsx("input",{type:"text",name:"genre",value:t.genre,onChange:w,className:"w-full bg-gray-700 text-white px-4 py-2 rounded"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"text-gray-300",children:"Release Date"}),e.jsx("input",{type:"date",name:"releaseDate",value:t.releaseDate,onChange:w,className:"w-full bg-gray-700 text-white px-4 py-2 rounded"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-gray-300",children:"Cover Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500",onClick:()=>!g&&M.current.click(),children:[t.coverImage?typeof t.coverImage=="string"?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:t.coverImage,alt:"Preview",className:"h-32 w-32 object-cover rounded mb-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Current cover image"})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:URL.createObjectURL(t.coverImage),alt:"Preview",className:"h-32 w-32 object-cover rounded mb-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:t.coverImage.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"text-3xl text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400",children:"Click to upload"})]}),e.jsx("input",{type:"file",ref:M,onChange:T,accept:"image/*",className:"hidden",disabled:g})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"text-gray-300",children:["Audio File",!o&&"*"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500",onClick:()=>!g&&$.current.click(),children:[t.audioFile?typeof t.audioFile=="string"?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Z,{className:"text-3xl text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Current audio file"})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Z,{className:"text-3xl text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-400",children:t.audioFile.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"text-3xl text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400",children:"Click to upload audio"})]}),e.jsx("input",{type:"file",ref:$,onChange:U,accept:"audio/*",className:"hidden",disabled:g})]})]}),e.jsx("div",{className:"col-span-2 flex justify-end mt-4",children:e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded",disabled:g,children:g?o?"Updating...":"Saving...":o?"Update Song":"Add Song"})})]})]})}):null},ms=()=>{const s=E(),d=F(ze),r=F($e),p=F(K),h=F(ue),[i,a]=c.useState(!1),[b,l]=c.useState(null),[o,S]=c.useState("");c.useEffect(()=>{r==="idle"&&s(Ae({page:1,limit:100}))},[r,s]);const t=async j=>{try{await s(Se(j)).unwrap(),A.success("Song deleted successfully")}catch(m){A.error((m==null?void 0:m.message)||"Failed to delete song")}},y=j=>{l(j),a(!0)},v=async j=>{try{b?(await s(Ce({id:b._id,formData:j})).unwrap(),A.success("Song updated successfully")):(await s(Ie(j)).unwrap(),A.success("Song created successfully")),a(!1),l(null)}catch(m){A.error((m==null?void 0:m.message)||"Failed to save song")}},C=d.filter(j=>{var m,N,x,L;return j.title.toLowerCase().includes(o.toLowerCase())||((N=(m=j.artist)==null?void 0:m.name)==null?void 0:N.toLowerCase().includes(o.toLowerCase()))||((L=(x=j.album)==null?void 0:x.title)==null?void 0:L.toLowerCase().includes(o.toLowerCase()))});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Songs"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by title, artist or album...",value:o,onChange:j=>S(j.target.value),className:"w-full bg-gray-700 text-white pl-10 pr-4 py-2 rounded"})]}),e.jsxs("button",{onClick:()=>{l(null),a(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[e.jsx(me,{className:"mr-2"})," Add Song"]})]})]}),r==="loading"?e.jsx("div",{className:"text-center text-gray-400",children:"Loading songs..."}):C.length===0?e.jsx("div",{className:"text-center py-10 text-gray-400",children:"No songs found."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map(j=>e.jsx(ds,{song:j,onDelete:t,onEdit:y},j._id))}),e.jsx(os,{isOpen:i,onClose:()=>{a(!1),l(null)},onSubmit:v,artists:p,initialAlbums:h,songToEdit:b})]})},ws=()=>{const[s,d]=c.useState("dashboard"),r=F(ke),[p,h]=c.useState([]),[i,a]=c.useState([{id:1,title:"Blinding Lights",artist:"The Weeknd",album:"After Hours",duration:"3:20"},{id:2,title:"Anti-Hero",artist:"Taylor Swift",album:"Midnights",duration:"3:20"},{id:3,title:"Way 2 Sexy",artist:"Drake",album:"Certified Lover Boy",duration:"4:17"}]),b=o=>{h(o)},l=()=>{switch(s){case"artists":return e.jsx(rs,{});case"albums":return e.jsx(cs,{albums:p,onAlbumUpdate:b});case"songs":return e.jsx(ms,{songs:i});default:return e.jsx(ts,{artists:r,albums:p,songs:i})}};return e.jsx(Qe,{activeTab:s,setActiveTab:d,children:l()})};export{ws as default};
